# AI応募適合度チェッカー

## 概要

AI応募適合度チェッカーは、求人票と職務経歴書を比較分析し、応募者の適合度を評価するアプリケーションです。AIを活用して、求人の要件と応募者の経験を詳細に照合し、客観的な評価を提供します。

## 主な機能

### 入力
- **求人票**: 募集要項、職務内容、必須スキル、歓迎スキルなどの情報
  - 通常モード：1つの求人票を分析
  - 比較モード：最大3つの求人票を同時に比較
- **職務経歴書**: 応募者の職務経歴書、スキル、経験などの情報
- **実績メモ（オプション）**: 追加の実績・経験を記載することで、根拠抽出の精度が向上
- **強調軸（オプション）**: 分析時に重視する観点（例：技術力、セキュリティ、LLM）

### 出力

#### 1. スコア評価
- **総合スコア**: Must要件70% + Want要件30%の加重平均
- **Mustスコア**: 必須要件の適合度（0-100点）
- **Wantスコア**: 歓迎要件の適合度（0-100点）
- **強調軸による加点**: 指定した観点に関連する要件に最大+10%相当の加点

#### 2. 差分サマリ
- **強みTop3**: マッチした要件から、confidence順・Must優先で上位3件を表示
- **致命的ギャップTop3**: ギャップのある要件から、Must優先で上位3件を表示

#### 3. 詳細分析
- **マッチした要件**: 各要件に対する根拠、一致度、引用を表示
- **ギャップのある要件**: 不足している要件とその理由、改善の方向性を表示
- **引用検証**: 職務経歴書からの引用が実際に存在するか自動検証し、存在しない場合は警告表示

#### 4. 改善案
- **全体戦略**: 改善の方向性を1〜2文で要約
- **職務経歴書の編集・追記案**: テンプレートと具体例をコピーしやすい形式で表示
- **行動計画**: 優先度別（A/B/C）に分類された具体的な行動提案

#### 5. 面接想定Q&A
- **質問10問程度**: 強み深掘り、ギャップ突っ込み、志望動機寄せの質問を生成
- **回答の骨子**: 各質問に対する回答の骨子を箇条書きで提示
- **捏造禁止**: 職務経歴にない内容は「学習中/計画」として回答

#### 6. 品質評価（LLM-as-Judge）
- **総合品質スコア**: 0-100点で評価
- **観点別スコア**: 根拠の妥当性、捏造リスクの低さ、具体性、実行可能性、一貫性、読みやすさの6観点
- **改善ポイント**: 優先度順に3つの改善提案

#### 7. PDFエクスポート
- 分析結果をPDF形式でダウンロード可能
- スコア、サマリ、詳細分析、改善案、面接Q&Aを含む完全なレポート

#### 8. 複数求人票の比較（比較モード）
- 最大3つの求人票を同時に分析
- スコアランキング表示
- 各求人の詳細を折りたたみ表示

## 起動方法

### 1. 仮想環境の作成と有効化

```bash
python -m venv venv
source venv/bin/activate  # macOS/Linux
# または
venv\Scripts\activate  # Windows
```

### 2. 依存パッケージのインストール

```bash
pip install -r requirements.txt
```

### 3. 環境変数の設定

`.env`ファイルを作成し、以下の環境変数を設定してください：

```env
OPENAI_API_KEY=your_openai_api_key
# または
ANTHROPIC_API_KEY=your_anthropic_api_key
```

### 4. アプリケーションの起動

```bash
streamlit run app.py
```

ブラウザで自動的にアプリケーションが開きます。

## サンプルデータ

動作確認やテストに使用できるサンプルデータを用意しています。

### sample_data.py

以下のサンプルデータが含まれています：

**通常モード用**:
- `SAMPLE_JOB_TEXT`: Web系エンジニアの求人票
- `SAMPLE_RESUME_TEXT`: 5年経験のWebエンジニアの職務経歴書

**比較モード用**:
- `SAMPLE_JOB_TEXT_1`: スタートアップのフルスタックエンジニア募集
- `SAMPLE_JOB_TEXT_2`: 大手企業の社内システム開発エンジニア募集
- `SAMPLE_JOB_TEXT_3`: AI/機械学習エンジニア募集
- `SAMPLE_RESUME_TEXT_COMPARISON`: LLM経験を含む職務経歴書
- `SAMPLE_ACHIEVEMENT_NOTES`: 実績メモのサンプル
- `SAMPLE_EMPHASIS_AXES`: 企業タイプ別の推奨強調軸

### 使い方

```python
from sample_data import SAMPLE_JOB_TEXT_1, SAMPLE_JOB_TEXT_2, SAMPLE_JOB_TEXT_3
from sample_data import SAMPLE_RESUME_TEXT_COMPARISON

# コピーしてStreamlitアプリに貼り付け
print(SAMPLE_JOB_TEXT_1)  # 求人1
print(SAMPLE_JOB_TEXT_2)  # 求人2
print(SAMPLE_JOB_TEXT_3)  # 求人3
print(SAMPLE_RESUME_TEXT_COMPARISON)  # 職務経歴書
```

または、ファイルを直接開いてコピー＆ペーストすることもできます。

## 使用方法

### 基本的な使い方

1. **入力情報を入力**
   - 求人票のテキストを貼り付け
   - 職務経歴書のテキストを貼り付け

2. **オプション設定（任意）**
   - 志望職種を入力
   - 強調したい軸を入力（例：技術力、セキュリティ）
   - 実績メモを追加（根拠抽出の精度向上）

3. **分析を実行**
   - 「🚀 分析を実行」ボタンをクリック
   - F1〜F6の処理が順次実行されます

4. **結果を確認**
   - スコア、差分サマリ、詳細分析、改善案、面接Q&A、品質評価を確認
   - PDFレポートをダウンロード可能

### 比較モードの使い方

1. **比較モードを有効化**
   - 「🔀 比較モード（最大3つの求人票を比較）」にチェック

2. **複数の求人票を入力**
   - タブで求人1、求人2、求人3を入力

3. **分析を実行**
   - 各求人票に対して順次分析が実行されます

4. **比較結果を確認**
   - スコアランキングで上位順に表示
   - 各求人の詳細を折りたたみ表示

## 技術仕様

### 処理フロー

1. **F1: 求人要件抽出** - 求人票からMust/Want要件を抽出
2. **F2: 根拠抽出** - 職務経歴書から各要件に対する根拠を抽出
   - セクション分解による精度向上
   - RAG検索による実績メモからの根拠候補取得
3. **F3: スコア計算** - 適合度スコアを計算（強調軸による加点対応）
4. **F4: 改善案生成** - ギャップ分析から改善案を生成
5. **F5: 面接Q&A生成** - 分析結果から面接想定Q&Aを生成
6. **F6: 品質評価** - LLM-as-Judgeで出力品質を評価

### 使用技術

- **フレームワーク**: Streamlit
- **LLM**: OpenAI GPT-4o-mini / Anthropic Claude
- **ベクトルDB**: Chroma（RAG検索用）
- **PDF生成**: fpdf2
- **データモデル**: Pydantic v2

## 注意事項

⚠️ **個人情報の取り扱いについて**

- 本アプリケーションを使用する際は、職務経歴書に含まれる個人情報（氏名、連絡先、住所など）をマスクすることを強く推奨します
- 機密情報や個人情報が含まれる可能性があるため、使用前に十分ご注意ください
- LLMを使用するため、入力データがAPI経由で送信されます

## トラブルシューティング

### よくある問題

**Q: 引用が「⚠️引用要確認」と表示される**
- 職務経歴書からの引用が実際に存在しない可能性があります
- 引用が改行や空白の違いで検証に失敗している場合があります

**Q: 品質評価が表示されない**
- F6（品質評価）の実行に失敗した場合、スキップされます
- 分析結果は正常に表示されます

**Q: RAG検索が動作しない**
- 実績メモが入力されていることを確認してください
- OpenAI APIキーが正しく設定されていることを確認してください

**Q: PDFがダウンロードできない**
- ブラウザの設定を確認してください
- 日本語フォントの問題で一部の文字が正しく表示されない場合があります

