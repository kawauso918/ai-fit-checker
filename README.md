# AI応募適合度チェッカー

[![Streamlit App](https://static.streamlit.io/badges/streamlit_badge_black_white.svg)](https://ai-fit-checker.streamlit.app)

AIを活用して、求人票と職務経歴書を比較分析し、応募者の適合度を自動評価するWebアプリケーションです。

## 🌐 公開URL

**Streamlit Cloud**: [https://ai-fit-checker.streamlit.app](https://ai-fit-checker.streamlit.app)

> いつでもアクセス可能です。APIキーの設定は不要です（Streamlit Cloudで設定済み）。

## 📋 概要

AI応募適合度チェッカーは、求人票と職務経歴書を比較分析し、応募者の適合度を評価するアプリケーションです。AIを活用して、求人の要件と応募者の経験を詳細に照合し、客観的な評価を提供します。

## ✨ 機能

### 入力機能
- **求人票**: 募集要項、職務内容、必須スキル、歓迎スキルなどの情報
- **職務経歴**: 応募者の職務経歴書、スキル、経験などの情報

### 🛡️ 入力バリデーション
- **APIキーの自動チェック**: 選択したプロバイダー（OpenAI/Anthropic）のAPIキーが設定されているか検証
- **文字数制限チェック**:
  - 50,000文字上限（超過時はエラー）
  - 20,000文字以上で警告表示
- **自動テキスト短縮** 🆕:
  - 20,000文字以上の場合、重要セクションのみを自動抽出（デフォルトON）
  - 求人票: 必須スキル、歓迎スキル、業務内容などを抽出
  - 職務経歴書: 職務経歴、スキル、実績などを抽出
  - 処理時間とコストを削減

### 📊 分析・評価機能
- **要件抽出（F1）**:
  - Must要件とWant要件を自動抽出
  - **重複統合機能** 🆕: MustとWantで重複する要件を自動除外（Must優先）
  - **粒度調整** 🆕: 適切な粒度で要件を抽出（細かすぎず粗すぎず）

- **根拠抽出（F2）**:
  - 職務経歴書から各要件に対する根拠を抽出
  - **引用検証機能** 🆕: 抽出された引用が原文に存在するか自動検証し、存在しない場合は警告表示

- **スコア計算（F3）**:
  - 総合スコア（0-100点）: Must 70% + Want 30%
  - **スコア計算の透明性** 🆕: 計算式とconfidence点数化ルールを詳細表示
  - Mustスコア、Wantスコア、マッチ数/ギャップ数を表示

- **改善案生成（F4）**:
  - 職務経歴書の編集・追記案
  - 優先度別の行動計画（A/B/C）

## 🚀 使い方

### 1. Webアプリで使用（推奨）

1. **アクセス**: [公開URL](https://ai-fit-checker.streamlit.app)にアクセス
2. **入力**: 求人票と職務経歴書のテキストを入力フォームに貼り付け
   - ⚠️ **個人情報は必ずマスク**してください（氏名、住所、電話番号など）
   - テキストは50,000文字以下を推奨（それ以上はエラー）
   - 20,000文字以上の場合、自動的に重要部分のみが抽出されます 🆕
3. **オプション設定（任意）**:
   - 志望職種や強調したい軸を入力
   - 詳細設定でLLMモデルやパラメータを調整可能
   - **自動短縮の ON/OFF** を切り替え可能（デフォルトON）🆕
4. **分析実行**: 「🚀 分析を実行」ボタンをクリック
5. **結果確認**:
   - 総合スコア、Must/Wantスコアを確認
   - **スコア計算の説明**を展開して確認可能 🆕
   - マッチした要件とギャップのある要件を確認
   - 改善案（職務経歴書の編集案、行動計画）を確認

### 2. ローカルで起動

#### 1. リポジトリのクローン

```bash
git clone https://github.com/kawauso918/ai-fit-checker.git
cd ai-fit-checker
```

#### 2. 仮想環境の作成と有効化

```bash
python -m venv env
source env/bin/activate  # macOS/Linux
# または
env\Scripts\activate  # Windows
```

#### 3. 依存パッケージのインストール

```bash
pip install -r requirements.txt
```

#### 4. 環境変数の設定

`.env`ファイルを作成し、APIキーを設定：

```bash
# .env.exampleを参考に作成
OPENAI_API_KEY=your_api_key_here
# または
ANTHROPIC_API_KEY=your_api_key_here
```

#### 5. アプリケーションの起動

```bash
streamlit run app.py
```

ブラウザで自動的にアプリケーションが開きます（通常は `http://localhost:8501`）。

## 📝 使用例（コピペ例）

### 求人票の例

```
【求人票】Webエンジニア募集

■必須スキル
・Python開発経験3年以上
・Webアプリケーション開発の実務経験
・Docker/Kubernetesの実務経験

■歓迎スキル
・AWSなどクラウド環境での開発経験
・機械学習・データ分析の知識
・チームリーダー経験
```

### 職務経歴書の例

```
【職務経歴書】

■職務経歴
2019年〜現在：株式会社ABC
・Pythonを使用したWebアプリケーション開発に5年間従事
・Djangoフレームワークを用いたECサイトの構築
・AWS (EC2, S3, RDS) を活用したインフラ構築
・Dockerを使用したコンテナ化とCI/CDパイプラインの構築

■スキル
・Python（5年）、JavaScript（3年）
・Django, Flask, FastAPI
・AWS, Docker, Git
・チーム開発経験あり
```

## ⚠️ 注意事項

### 個人情報の取り扱い

⚠️ **重要**: 本アプリケーションを使用する際は、以下の点にご注意ください。

- **個人情報のマスク**: 職務経歴書に含まれる個人情報（氏名、連絡先、住所、電話番号など）は**必ずマスク**してください
- **機密情報**: 企業の機密情報や個人情報が含まれる可能性があるため、使用前に十分ご注意ください
- **LLMの利用**: 本アプリはLLM（大規模言語モデル）を使用します。入力データはAPI経由で送信されます

### 結果について

- **参考情報として利用**: 本アプリが出力する結果は**参考情報**です。最終的な判断はご自身で行ってください
- **AIの限界**: AIによる分析には限界があり、文脈やニュアンスを完全に理解できない場合があります
- **継続的改善**: アプリは継続的に改善されていますが、完璧ではありません

## 🛠️ 技術スタック

- **Streamlit**: Webアプリケーションフレームワーク
- **LangChain**: LLMアプリケーション開発フレームワーク
- **OpenAI API**: GPT-4o / GPT-4o-mini を使用
- **Anthropic API**: Claude 3.5 Sonnet を使用（オプション）
- **Pydantic**: データバリデーションと構造化
- **Python 3.11+**: プログラミング言語

### 主要ライブラリ

- `streamlit>=1.28.0`: WebアプリケーションUI
- `langchain>=0.1.0`: LLM統合
- `langchain-openai>=0.0.5`: OpenAI統合
- `langchain-anthropic>=0.1.0`: Anthropic統合
- `openai>=1.0.0`: OpenAI API
- `pydantic>=2.0.0`: データバリデーション
- `python-dotenv>=1.0.0`: 環境変数管理

## 📸 スクリーンショット

### 入力画面

![入力画面](docs/screenshot-input.png)

> 注: スクリーンショットを `docs/screenshot-input.png` に配置してください

### 結果画面（スコア/引用/改善案）

![結果画面](docs/screenshot-result.png)

> 注: スクリーンショットを `docs/screenshot-result.png` に配置してください

## 📊 処理フロー

### 前処理
- **入力バリデーション**: APIキーチェック、文字数制限チェック
- **自動テキスト短縮** 🆕: 20,000文字以上の場合、重要セクションのみを抽出

### メイン処理
1. **F1: 求人要件抽出**
   - 求人票からMust要件とWant要件を抽出
   - 🆕 重複統合（MustとWantで重複する要件を除外）
   - 🆕 粒度調整（適切な粒度で要件を抽出）

2. **F2: 根拠抽出**
   - 職務経歴書から各要件に対する根拠を抽出
   - 🆕 引用検証（抽出された引用が原文に存在するか確認）

3. **F3: スコア計算**
   - 適合度スコアを計算（Must 70% + Want 30%）
   - 🆕 スコア計算の透明性（計算式とconfidence点数化ルールを表示）

4. **F4: 改善案生成**
   - ギャップ分析に基づいて改善案を生成
   - 職務経歴書の編集案と優先度別行動計画を提示

## 🔧 開発

### プロジェクト構造

```
ai-fit-checker/
├── app.py                      # メインアプリケーション
├── f1_extract_requirements.py # F1: 要件抽出
├── f2_extract_evidence.py      # F2: 根拠抽出
├── f3_score.py                 # F3: スコア計算
├── f4_generate_improvements.py # F4: 改善案生成
├── models.py                   # データモデル定義
├── llm_judge.py                # LLM評価（オプション）
├── requirements.txt            # 依存パッケージ
├── .streamlit/
│   └── config.toml            # Streamlit設定
└── README.md                   # このファイル
```

### 環境変数

| 変数名 | 説明 | 必須 |
|--------|------|------|
| `OPENAI_API_KEY` | OpenAI APIキー | いずれか必須 |
| `ANTHROPIC_API_KEY` | Anthropic APIキー | いずれか必須 |

## 📄 ライセンス

このプロジェクトのライセンス情報を記載してください。

## 🤝 コントリビューション

プルリクエストやイシューの報告を歓迎します。

## 📧 お問い合わせ

質問やフィードバックがある場合は、GitHubのIssuesまでお願いします。

---

**免責事項**: 本アプリケーションは参考情報を提供するものです。就職活動や転職活動における最終的な判断は、ご自身の責任で行ってください。
